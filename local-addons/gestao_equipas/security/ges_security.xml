<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data noupdate="0">
        <record id="ges_group_category" model="ir.module.category">
            <field name="name">Gestão de Equipas Desportivas</field>
        </record>

        <record id="ges_participante_eventos" model="res.groups">
            <field name="name">Participante em eventos desportivos</field>
            <field name="category_id" ref="gestao_equipas.ges_group_category"/>
        </record>

        <record id="ges_membro_equipa_tecnica" model="res.groups">
            <field name="name">Membro da equipa técnica</field>
            <field name="implied_ids" eval="[(4, ref('gestao_equipas.ges_participante_eventos'))]"/>
            <field name="category_id" ref="gestao_equipas.ges_group_category"/>
        </record>

        <record id="ges_resp_gestao_eventos" model="res.groups">
            <field name="name">Responsável pela gestão de eventos desportivos</field>
            <field name="category_id" ref="gestao_equipas.ges_group_category"/>
        </record>

        <record id="ges_membro_direcao_clube" model="res.groups">
            <field name="name">Membro da direção do clube</field>
            <field name="category_id" ref="gestao_equipas.ges_group_category"/>
        </record>


        <record id="ges_user_pai" model="res.groups">
            <field name="name">Pai</field>
            <field name="implied_ids" eval="[(4, ref('gestao_equipas.ges_participante_eventos'))]"/>
            <field name="category_id" ref="gestao_equipas.ges_group_category"/>
        </record>

        <record id="ges_user_atleta" model="res.groups">
            <field name="name">Atleta</field>
            <field name="implied_ids" eval="[(4, ref('gestao_equipas.ges_participante_eventos'))]"/>
            <field name="category_id" ref="gestao_equipas.ges_group_category"/>
        </record>

        <record id="ges_user_treinador" model="res.groups">
            <field name="name">Treinador</field>
            <field name="implied_ids"
                   eval="[(4, ref('gestao_equipas.ges_participante_eventos')),
                          (4, ref('gestao_equipas.ges_membro_equipa_tecnica')),
                          (4, ref('gestao_equipas.ges_resp_gestao_eventos'))]"/>
            <field name="category_id" ref="gestao_equipas.ges_group_category"/>
        </record>

        <record id="ges_user_seccionista" model="res.groups">
            <field name="name">Seccionista</field>
            <field name="implied_ids"
                   eval="[(4, ref('gestao_equipas.ges_participante_eventos')),
                          (4, ref('gestao_equipas.ges_membro_equipa_tecnica'))]"/>
            <field name="category_id" ref="gestao_equipas.ges_group_category"/>
        </record>

        <record id="ges_user_massagista" model="res.groups">
            <field name="name">Massagista</field>
            <field name="implied_ids"
                   eval="[(4, ref('gestao_equipas.ges_participante_eventos')),
                          (4, ref('gestao_equipas.ges_membro_equipa_tecnica'))]"/>
            <field name="category_id" ref="gestao_equipas.ges_group_category"/>
        </record>

        <record id="ges_user_diretor_tecnico" model="res.groups">
            <field name="name">Diretor técnico</field>
            <field name="implied_ids"
                   eval="[(4, ref('gestao_equipas.ges_membro_equipa_tecnica')),
                          (4, ref('gestao_equipas.ges_resp_gestao_eventos')),
                          (4, ref('gestao_equipas.ges_membro_direcao_clube'))]"/>
            <field name="category_id" ref="gestao_equipas.ges_group_category"/>
        </record>

        <record id="ges_user_gestor_clube" model="res.groups">
            <field name="name">Gestor de clube</field>
            <field name="implied_ids"
                   eval="[(4, ref('gestao_equipas.ges_membro_equipa_tecnica')),
                          (4, ref('gestao_equipas.ges_resp_gestao_eventos')),
                          (4, ref('gestao_equipas.ges_membro_direcao_clube')),
                          (4, ref('base.group_erp_manager')),
                          (4, ref('base.group_system'))]"/>
            <field name="category_id" ref="gestao_equipas.ges_group_category"/>
        </record>

        <record id="ges_user_admin" model="res.groups">
            <field name="name">Administrador</field>
            <field name="users" eval="[(4, ref('base.user_root'))]"/>
            <field name="implied_ids"
                   eval="[(4, ref('gestao_equipas.ges_participante_eventos')),
                          (4, ref('gestao_equipas.ges_membro_equipa_tecnica')),
                          (4, ref('gestao_equipas.ges_membro_direcao_clube')),
                          (4, ref('gestao_equipas.ges_resp_gestao_eventos')),
                          (4, ref('gestao_equipas.ges_membro_direcao_clube'))]"/>
            <field name="category_id" ref="base.module_category_administration"/>
        </record>
    </data>


    <data noupdate="0">
        <record model="ir.rule" id="ges_atleta_user_rule">
            <field name="name">Um atleta vê apenas os seus dados</field>
            <field name="model_id" ref="model_ges_atleta"/>
            <field name="groups" eval="[(4, ref('ges_user_atleta'))]"/>
            <field name="domain_force">
                [('user_id', '=', user.id)]
            </field>
        </record>

        <record model="ir.rule" id="ges_atleta_licencas_user_rule">
            <field name="name">Um atleta vê apenas as suas licenças desportivas</field>
            <field name="model_id" ref="model_ges_licenca_desportiva"/>
            <field name="groups" eval="[(4, ref('ges_user_atleta'))]"/>
            <field name="domain_force">
                [('atleta_id.user_id', '=', user.id)]
            </field>
        </record>

        <record model="ir.rule" id="ges_atleta_dados_antropometricos_user_rule">
            <field name="name">Um atleta vê apenas os seus dados antropométricos</field>
            <field name="model_id" ref="model_ges_dados_antropometricos"/>
            <field name="groups" eval="[(4, ref('ges_user_atleta'))]"/>
            <field name="domain_force">
                [('atleta_id.user_id', '=', user.id)]
            </field>
        </record>

        <record model="ir.rule" id="ges_atleta_testes_fisicos_user_rule">
            <field name="name">Um atleta vê apenas os seus testes fisicos</field>
            <field name="model_id" ref="model_ges_testes_fisicos"/>
            <field name="groups" eval="[(4, ref('ges_user_atleta'))]"/>
            <field name="domain_force">
                [('atleta_id.user_id', '=', user.id)]
            </field>
        </record>

        <record model="ir.rule" id="ges_atleta_lesoes_user_rule">
            <field name="name">Um atleta vê apenas as suas lesões</field>
            <field name="model_id" ref="model_ges_lesao"/>
            <field name="groups" eval="[(4, ref('ges_user_atleta'))]"/>
            <field name="domain_force">
                [('atleta.user_id', '=', user.id)]
            </field>
        </record>

        <record model="ir.rule" id="ges_atleta_treinos_user_rule">
            <field name="name">Um atleta vê apenas os treinos para os quais foi convocado</field>
            <field name="model_id" ref="model_ges_treino"/>
            <field name="groups" eval="[(4, ref('ges_user_atleta'))]"/>
            <field name="domain_force">
                [('atletas.user_ids', 'in', user.id)]
            </field>
        </record>


        <record model="ir.rule" id="ges_pai_user_rule">
            <field name="name">Um pai vê apenas os seus dados</field>
            <field name="model_id" ref="model_ges_pai"/>
            <field name="groups" eval="[(4, ref('ges_user_pai'))]"/>
            <field name="domain_force">
                [('user_id', '=', user.id)]
            </field>
        </record>

        <record model="ir.rule" id="ges_pai_atletas_rule">
            <field name="name">Um pai vê apenas os dados dos seus filhos</field>
            <field name="model_id" ref="model_ges_atleta"/>
            <field name="groups" eval="[(4, ref('ges_user_pai'))]"/>
            <field name="domain_force">
                [('pais.user_ids', 'in', user.id)]
            </field>
        </record>


        <record model="ir.rule" id="ges_pai_seccionista_user_rule">
            <field name="name">Um pai seccionista vê todos os dados</field>
            <field name="model_id" ref="model_ges_pai"/>
            <field name="groups" eval="[(4, ref('ges_membro_equipa_tecnica'))]"/>
            <!--field name="domain_force">
                [('user_id', '=', user.id)]
            </field-->
        </record>

        <record model="ir.rule" id="ges_pai_seccionista_atletas_rule">
            <field name="name">Um pai seccionista vê todos os atletas</field>
            <field name="model_id" ref="model_ges_atleta"/>
            <field name="groups" eval="[(4, ref('ges_membro_equipa_tecnica'))]"/>
            <!--field name="domain_force">
                [('pais.user_ids', 'in', user.id)]
            </field-->
        </record>


        <record model="ir.rule" id="ges_seccionista_user_rule">
            <field name="name">Um seccionista pode ver e editar os seus dados</field>
            <field name="model_id" ref="model_ges_seccionista"/>
            <field name="groups" eval="[(4, ref('ges_user_seccionista'))]"/>
            <field name="domain_force">
                [('user_id', '=', user.id)]
            </field>
        </record>

        <record model="ir.rule" id="ges_seccionista_outros_user_rule">
            <field name="name">Um seccionista não pode editar os dados de outros seccionistas</field>
            <field name="model_id" ref="model_ges_seccionista"/>
            <field name="groups" eval="[(4, ref('ges_user_seccionista'))]"/>
            <field name="domain_force">
                [('user_id', '!=', user.id)]
            </field>
            <field name="perm_write">False</field>
        </record>


        <record model="ir.rule" id="ges_treinador_user_rule">
            <field name="name">Um treinador pode ver e editar os seus dados</field>
            <field name="model_id" ref="model_ges_treinador"/>
            <field name="groups" eval="[(4, ref('ges_user_treinador'))]"/>
            <field name="domain_force">
                [('user_id', '=', user.id)]
            </field>
        </record>

        <record model="ir.rule" id="ges_treinador_outros_user_rule">
            <field name="name">Um treinador não pode editar os dados de outros treinadores</field>
            <field name="model_id" ref="model_ges_treinador"/>
            <field name="groups" eval="[(4, ref('ges_user_treinador'))]"/>
            <field name="domain_force">
                [('user_id', '!=', user.id)]
            </field>
            <field name="perm_write">False</field>
        </record>


    </data>
</odoo>